<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="/css/iframe.css">
		<link rel="stylesheet" href="/css/index.css">
		<link rel="icon" type="image/png" href="/img/cornicon.png">
		<title>Corn Pr0xy</title>
	</head>
	<body>
		<div class="center">
			<div class="center-block">
				<a class="button inline" href="/index.html">Back</a>
				<a class="button inline" href="/license.txt">License</a>
			</div>
			<div class="center-block">
				<input type="text" id="text" />
				<select id="proxyType" class="button inline" title="Change this if you are experiencing overly slow proxying on basic websites">
					<option value="cyclic">Cyclic (Slow)</option>
					<option value="hypertabs1">Hypertabs 1</option>
					<option value="hypertabs2">Hypertabs 2</option>
					<option value="holyub1">Holy Unblocker 1</option>
					<option value="proxy">Dev Proxy</option>
				</select>
			</div>
		</div>
		<iframe allow="fullscreen" id="iframe" src="/other/select.html"></iframe>
		<script>
			var gamelist = {
				"cyclic": "https://frightened-yak-jodhpurs.cyclic.app/bare/",
				"hypertabs1": "https://uv.hypertabs.cc/bare1/",
				"hypertabs2": "https://uv.hypertabs.cc/bare2/",
				"holyub1": "https://uv.holyubofficial.net/bare1/",
				"proxy": "https://example.com",
			};
		</script>
		<script src="/scripts/gameinfo.js"></script>
		<script>
			function setUrlForIframe(e) {
                let input = document.getElementById("text").value;
                let iframe = document.getElementById("iframe");
                let bare = getGameUrl(document.getElementById("proxyType").value);
                let signal = "bare:" + bare;
                signal += ";" + "url:" + input;
				iframe.contentWindow.postMessage(signal, "*");
				iframe.removeEventListener("load", setUrlForIframe);
			}
			function enter() {
                let iframe = document.getElementById("iframe");
				iframe.addEventListener("load", setUrlForIframe);
				iframe.src = "https://corn-proxy.web.app/loader.html"; //TODO
			}
			document.getElementById("text").addEventListener("keydown", function (e) { if (e.code === "Enter") { enter(); } });
		</script>
		<script src="/scripts/themeloader.js"></script>
	</body>
</html>
